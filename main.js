!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n}var n,r;return n=t,(r=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_toggleButtonState",value:function(){this._getInvalidInput()?(this._button.classList.add(this._inactiveButtonClass),this._button.disabled=!0):(this._button.classList.remove(this._inactiveButtonClass),this._button.disabled=!1)}},{key:"_getInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._button=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){var n=t.data,r=t.handleCardClick,o=t.handleLikeCard,i=t.handleRemoveCard,a=t.cardSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n.name,this._link=n.link,this._cardId=n._id,this._likes=n.likes,this._cardOwner=n.owner._id,this._cardSelector=a,this._handleCardClick=r,this._handleLikeCard=o,this._handleRemoveCard=i,this._cardLiked=!1}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".photo-grid__card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".photo-grid__heart-icon").addEventListener("click",(function(){e._handleLikeCard(e)})),this._element.querySelector(".photo-grid__delete-icon").addEventListener("click",(function(){e._handleRemoveCard({id:e._cardId})})),this._element.querySelector(".photo-grid__image").addEventListener("click",(function(){e._handleCardClick({link:e._link,name:e._name})}))}},{key:"removeCard",value:function(){this._element.remove(),this._element=null}},{key:"_renderLikes",value:function(e){this._element.querySelector(".photo-grid__text").textContent=this._likes.length,this._likes.some((function(t){return t._id===e}))?(this._cardLiked=!0,this._element.querySelector(".photo-grid__heart-icon").classList.add("photo-grid__heart-icon_active")):(this._cardLiked=!1,this._element.querySelector(".photo-grid__heart-icon").classList.remove("photo-grid__heart-icon_active"))}},{key:"updateCount",value:function(e,t){this._likes=e.likes,this._renderLikes(t)}},{key:"generateCard",value:function(e){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".photo-grid__image").src=this._link,this._element.querySelector(".photo-grid__image").alt=this._name,this._element.querySelector(".photo-grid__title").textContent=this._name,this._renderLikes(e),this._cardOwner!==e&&(this._element.querySelector(".photo-grid__delete-icon").hidden=!0),this._element}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n),this._items=[]}var t,n;return t=e,(n=[{key:"addItem",value:function(e,t){this._container.prepend(e),this._items[t]=e}},{key:"removeItem",value:function(e){var t=this._items[e];t.remove(),t=null,this._items.splice(e)}},{key:"renderItems",value:function(e){e.forEach(this._renderer)}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this.close=this.close.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){(t.target.classList.contains("popup_type_preview")||t.target.classList.contains("popup__close-button"))&&e.close()}))}}])&&a(t.prototype,n),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},l(e,t,n||e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e){var t,n=e.popupSelector,r=e.formButton,o=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleFormSubmit=o,t._formButton=r,t}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(".form").addEventListener("submit",(function(t){t.preventDefault(),e._popupElement.querySelector(".form__button").textContent="Saving...",e._handleFormSubmit(e._getInputValues())})),l(p(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){this._popupElement.querySelector(".form").reset(),l(p(a.prototype),"close",this).call(this)}},{key:"stopLoading",value:function(){this._popupElement.querySelector(".form__button").textContent=this._formButton}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._popupElement.querySelectorAll(".form__input"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}}])&&u(t.prototype,n),a}(c);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},v(e,t,n||e)}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function E(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(){return y(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;this._popupElement.querySelector(".popup__caption").textContent=n;var r=this._popupElement.querySelector(".popup__image");r.src=t,r.alt=n,v(S(a.prototype),"open",this).call(this)}}])&&m(t.prototype,n),a}(c),k=g;function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){var n=t.nameSelector,r=t.titleSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._titleElement=document.querySelector(r),this._avatarElement=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,about:this._titleElement.textContent,avatar:this._avatarElement.src}}},{key:"setUserInfo",value:function(e){this._nameElement.textContent=e.name,this._titleElement.textContent=e.about,this._avatarElement.src=e.avatar}}])&&C(t.prototype,n),e}();function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r,this._handleResponse=this._handleResponse.bind(this)}var t,n;return t=e,(n=[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"cards"),{headers:this._headers}).then(this._handleResponse)}},{key:"addCard",value:function(e){return fetch("".concat(this._baseUrl,"cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"cards/").concat(e),{headers:this._headers,method:"DELETE",body:JSON.stringify({_id:e})}).then(this._handleResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"cards/likes/").concat(e),{headers:this._headers,method:"PUT",body:JSON.stringify({_id:e})}).then(this._handleResponse)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"cards/likes/").concat(e),{headers:this._headers,method:"DELETE",body:JSON.stringify({_id:e})}).then(this._handleResponse)}},{key:"getUser",value:function(){return fetch("".concat(this._baseUrl,"users/me"),{headers:this._headers}).then(this._handleResponse)}},{key:"setUser",value:function(e,t,n){return fetch("".concat(this._baseUrl,"users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e,about:t,avatar:n})}).then(this._handleResponse)}},{key:"getAvatar",value:function(){return fetch("".concat(this._baseUrl,"users/me/avatar"),{headers:this._headers,method:"GET"}).then(this._handleResponse)}},{key:"setAvatar",value:function(e){return fetch("".concat(this._baseUrl,"users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then(this._handleResponse)}}])&&L(t.prototype,n),e}(),q=document.querySelector(".popup_type_edit"),R=document.querySelector(".popup_type_add"),j=document.querySelector(".popup_type_avatar"),I=q.querySelector(".form"),P=R.querySelector(".form"),B=j.querySelector(".form"),T=document.querySelector(".profile__edit-button"),x=document.querySelector(".profile__add-button"),U=document.querySelector(".profile__avatar-button"),V=document.querySelector(".profile__image"),A=document.querySelector(".profile__name"),D=document.querySelector(".profile__title");function F(e){e._popupElement.querySelector(".form__button").classList.add("form__button_disabled")}var N=new O({baseUrl:"https://around.nomoreparties.co/v1/group-11/",headers:{authorization:"ce0cfad9-c022-44c4-8673-897f4eaf9eed","Content-Type":"application/json"}});Promise.all([N.getUser(),N.getInitialCards()]).then((function(e){e[1].sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)}));var t=new i({renderer:function(e){n(e)}},".photo-grid");function n(n){var o=new r({data:n,handleCardClick:function(e){H.open(e)},handleLikeCard:function(t){t._cardLiked?N.deleteLike(t._cardId).then((function(n){t.updateCount(n,e[0]._id)})).catch((function(e){return console.log("Error: ".concat(e))})):N.addLike(t._cardId).then((function(n){t.updateCount(n,e[0]._id)})).catch((function(e){return console.log("Error: ".concat(e))}))},handleRemoveCard:function(e){var t;t=e.id,c._popupElement.querySelector(".form__input_type_card-id").value=t,c.open()},cardSelector:".card-template"}),i=o.generateCard(e[0]._id);t.addItem(i,o._cardId)}t.renderItems(e[1]),new w({nameSelector:".profile__name",titleSelector:".profile__title",avatarSelector:".profile__image"}).setUserInfo(e[0]);var o=new d({popupSelector:".popup_type_add",formButton:"Create",handleFormSubmit:function(e){var t={name:e.name,link:e.link};N.addCard(t).then((function(e){n(e),o.close()})).catch((function(e){return console.log("Error: ".concat(e))})).finally((function(){o.stopLoading()}))}});o.setEventListeners(),x.addEventListener("click",(function(){F(o),o.open()}));var a=new d({popupSelector:".popup_type_edit",formButton:"Save",handleFormSubmit:function(e){var t=e.name,n=e.about;N.setUser(t,n).then((function(e){A.textContent=t,D.textContent=n,a.close()})).catch((function(e){return console.log("Error: ".concat(e))})).finally((function(){a.stopLoading()}))}});a.setEventListeners(),T.addEventListener("click",(function(){var e,t;e=A.textContent,t=D.textContent,a._popupElement.querySelector(".form__input_type_name").value=e,a._popupElement.querySelector(".form__input_type_title").value=t,a.open()}));var c=new d({popupSelector:".popup_type_delete",formButton:"Yes",handleFormSubmit:function(e){N.deleteCard(e.id).then((function(n){t.removeItem(e.id),c.close()})).catch((function(e){return console.log("Error: ".concat(e))})).finally((function(){c.stopLoading()}))}});c.setEventListeners()})).catch((function(e){return console.log("Error: ".concat(e))}));var J=new d({popupSelector:".popup_type_avatar",formButton:"Save",handleFormSubmit:function(e){var t=e.avatarLink;N.setAvatar(t).then((function(e){V.src=t,J.close()})).catch((function(e){return console.log("Error: ".concat(e))})).finally((function(){J.stopLoading()}))}});J.setEventListeners(),U.addEventListener("click",(function(){J.open(),F(J)}));var H=new k(".popup_type_preview");H.setEventListeners();var z={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"};new t(z,P).enableValidation(),new t(z,I).enableValidation(),new t(z,B).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBTW9ILEVBQ2hCRCxFQUFnQmpHLFdBR25CMkUsT0FBTSxTQUFDQyxHQUFELE9BQVNDLFFBQVFDLElBQVIsaUJBQXNCRixPQUNyQ2MsU0FBUSxXQUFRTyxFQUFnQk4sb0JBSXZDTSxFQUFnQkwsb0JBQ2hCekMsRUFBYTFHLGlCQUFpQixTQUFTLFdBQ25Dd0osRUFBZ0J6QixPQUNoQmpCLEVBQXNCMEMsTUFJMUIsSUFBTTFCLEVBQWEsSUFBSXhELEVBQWUsdUJBQ3RDd0QsRUFBV3FCLG9CQUlYLElBQU1TLEVBQXlCLENBQzdCNUwsY0FBZSxlQUNmRSxxQkFBc0IsZ0JBQ3RCRSxvQkFBcUIsd0JBQ3JCRSxnQkFBaUIseUJBQ2pCRSxXQUFZLHVCQUlXLElBQUliLEVBQWNpTSxFQUF3QnRELEdBQ2xEdUQsbUJBRVMsSUFBSWxNLEVBQWNpTSxFQUF3QnZELEdBQ2xEd0QsbUJBRVUsSUFBSWxNLEVBQWNpTSxFQUF3QnJELEdBQ2xEc0QsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcblxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIH1cblxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIH1cblxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB9XG5cbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgICAgICBpZiAodGhpcy5fZ2V0SW52YWxpZElucHV0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfZ2V0SW52YWxpZElucHV0KCl7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XG4gICAgICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy9jaGVjayBpZiBpbnB1dCBpcyB2YWxpZFxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9XG5cblxuICAgIC8vcHVibGljIG1ldGhvZCB0byBlbmFibGUgZm9ybSB2YWxpZGF0aW9uXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7ICBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvciIsImNsYXNzIENhcmQge1xuICAgIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVMaWtlQ2FyZCwgaGFuZGxlUmVtb3ZlQ2FyZCwgY2FyZFNlbGVjdG9yIH0pIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICAgICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICAgICAgdGhpcy5fY2FyZE93bmVyID0gZGF0YS5vd25lci5faWQ7XG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCA9IGhhbmRsZUxpa2VDYXJkO1xuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVDYXJkID0gaGFuZGxlUmVtb3ZlQ2FyZDtcbiAgICAgICAgdGhpcy5fY2FyZExpa2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgX2dldFRlbXBsYXRlKCkge1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAgICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG8tZ3JpZF9fY2FyZCcpXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudFxuICAgIH1cblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgLy9zZXQgdXAgZXZlbnRzXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWdyaWRfX2hlYXJ0LWljb24nKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCh0aGlzKTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG8tZ3JpZF9fZGVsZXRlLWljb24nKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVDYXJkKHsgaWQ6IHRoaXMuX2NhcmRJZCB9KTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG8tZ3JpZF9faW1hZ2UnKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lIH0pO1xuICAgICAgICAgICAgfSlcblxuICAgIH07XG5cbiAgICByZW1vdmVDYXJkKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICBfcmVuZGVyTGlrZXModXNlcklkKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWdyaWRfX3RleHQnKS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgaXNMaWtlZCA9IHRoaXMuX2xpa2VzLnNvbWUobGlrZSA9PiBsaWtlLl9pZCA9PT0gdXNlcklkKVxuICAgICAgICBpZiAoaXNMaWtlZCkge1xuICAgICAgICAgICAgdGhpcy5fY2FyZExpa2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWdyaWRfX2hlYXJ0LWljb24nKS5jbGFzc0xpc3QuYWRkKCdwaG90by1ncmlkX19oZWFydC1pY29uX2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY2FyZExpa2VkID0gZmFsc2VcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWdyaWRfX2hlYXJ0LWljb24nKS5jbGFzc0xpc3QucmVtb3ZlKCdwaG90by1ncmlkX19oZWFydC1pY29uX2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlQ291bnQocmVzLCB1c2VySWQpIHtcbiAgICAgICAgdGhpcy5fbGlrZXMgPSByZXMubGlrZXM7XG4gICAgICAgIHRoaXMuX3JlbmRlckxpa2VzKHVzZXJJZCk7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVDYXJkKHVzZXJJZCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWdyaWRfX2ltYWdlJykuc3JjID0gdGhpcy5fbGluaztcblxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1ncmlkX19pbWFnZScpLmFsdCA9IHRoaXMuX25hbWU7XG5cbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG8tZ3JpZF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICAgICAgdGhpcy5fcmVuZGVyTGlrZXModXNlcklkKTtcblxuICAgICAgICBpZiAodGhpcy5fY2FyZE93bmVyICE9PSB1c2VySWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWdyaWRfX2RlbGV0ZS1pY29uJykuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50XG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmRcbiIsImNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2l0ZW1zID0gW107XG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50LCBpZCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICAgICAgdGhpcy5faXRlbXNbaWRdID0gZWxlbWVudDtcbiAgICB9XG5cbiAgICByZW1vdmVJdGVtKGlkKSB7XG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5faXRlbXNbaWRdXG4gICAgICAgIGl0ZW0ucmVtb3ZlKCk7XG4gICAgICAgIGl0ZW0gPSBudWxsXG4gICAgICAgIHRoaXMuX2l0ZW1zLnNwbGljZShpZClcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcyhyZXMpIHtcbiAgICAgICByZXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcilcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb24iLCJjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcylcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG5cbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX3R5cGVfcHJldmlldycpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnV0dG9uJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cCIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBmb3JtQnV0dG9uLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtQnV0dG9uID0gZm9ybUJ1dHRvblxuICB9XG4gIFxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19idXR0b25cIikudGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiOyBcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSlcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBzdG9wTG9hZGluZygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19idXR0b25cIikudGV4dENvbnRlbnQgPSB0aGlzLl9mb3JtQnV0dG9uO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXNcbiAgfVxuXG59XG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuXG4gICAgb3Blbih7IGxpbmssIG5hbWUgfSkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJykudGV4dENvbnRlbnQgPSBuYW1lXG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKVxuICAgICAgICBpbWFnZS5zcmMgPSBsaW5rO1xuICAgICAgICBpbWFnZS5hbHQgPSBuYW1lO1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZSIsImNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgdGl0bGVTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xuICAgICAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKSxcbiAgICAgICAgICAgIHRoaXMuX3RpdGxlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGl0bGVTZWxlY3RvciksXG4gICAgICAgICAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3RvcilcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCwgXG4gICAgICAgICAgICBhYm91dDogdGhpcy5fdGl0bGVFbGVtZW50LnRleHRDb250ZW50LCBcbiAgICAgICAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyRWxlbWVudC5zcmNcbiAgICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyhyZXMpIHtcbiAgICAgICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSByZXMubmFtZVxuICAgICAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSByZXMuYWJvdXRcbiAgICAgICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSByZXMuYXZhdGFyXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mb1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybCxcbiAgICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzLFxuICAgICAgdGhpcy5faGFuZGxlUmVzcG9uc2UgPSB0aGlzLl9oYW5kbGVSZXNwb25zZS5iaW5kKHRoaXMpXG4gIH1cblxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKClcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cblxuICBhZGRDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH1jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgZGVsZXRlQ2FyZChfaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH1jYXJkcy8ke19pZH1gLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgIF9pZFxuICAgICAgfSksXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbiAgfVxuXG4gIGFkZExpa2UoX2lkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHMvbGlrZXMvJHtfaWR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICBfaWRcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cblxuICBkZWxldGVMaWtlKF9pZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzL2xpa2VzLyR7X2lkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgX2lkXG4gICAgICB9KSxcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgZ2V0VXNlcigpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH11c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKVxuICB9XG5cbiAgc2V0VXNlcihuYW1lLCBhYm91dCwgYXZhdGFyKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9dXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgbmFtZSwgYWJvdXQsIGF2YXRhclxuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG4gIH1cblxuZ2V0QXZhdGFyKCkge1xuICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH11c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICBtZXRob2Q6IFwiR0VUXCIsXG4gIH0pXG4gICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpXG59XG5cbnNldEF2YXRhcihhdmF0YXIpIHtcbiAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9dXNlcnMvbWUvYXZhdGFyYCwge1xuICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgYXZhdGFyXG4gICAgfSlcbiAgfSlcbiAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSlcbn1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBBcGlcbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIlxuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiXG5cbi8vTW9kYWwgU2VsZWN0b3JzXG5jb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfZWRpdFwiKTtcbmNvbnN0IGFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2FkZFwiKTtcbmNvbnN0IGF2YXRhck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2F2YXRhclwiKTtcblxuLy9Gb3JtIFNlbGVjdG9yc1xuY29uc3QgZWRpdEZvcm0gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuY29uc3QgYWRkRm9ybSA9IGFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbmNvbnN0IGF2YXRhckZvcm0gPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIilcblxuLy9CdXR0b24gc2VsZWN0b3JzXG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWJ1dHRvblwiKTtcblxuLy9jYXJkIExpc3QgU2VjdGlvblxuY29uc3QgY2FyZExpc3RTZWN0aW9uID0gXCIucGhvdG8tZ3JpZFwiO1xuXG4vL0F2YXRhciBpbWFnZVxuY29uc3QgYXZhdGFySW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpXG5cbi8vc2V0RGVmYXVsdEJ1dHRvblN0YXRlXG5mdW5jdGlvbiBzZXREZWZhdWx0QnV0dG9uU3RhdGUocG9wdXApIHtcbiAgcG9wdXAuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fYnV0dG9uJykuY2xhc3NMaXN0LmFkZCgnZm9ybV9fYnV0dG9uX2Rpc2FibGVkJylcbn1cblxuY29uc3QgYXBpID0gbmV3IEFwaShjb25maWcpO1xuXG4vL0dldCB1c2VyIGluZm8gYW5kIGxvYWQgaW5pdGlhbCBjYXJkc1xuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VyKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pLnRoZW4oKHZhbHVlcykgPT4ge1xuXG4gIHZhbHVlc1sxXS5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShhLmNyZWF0ZWRBdCkgLSBuZXcgRGF0ZShiLmNyZWF0ZWRBdCkpXG5cbiAgY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgcmVuZGVyQ2FyZChpdGVtKVxuICAgIH0sXG4gIH0sXG4gICAgY2FyZExpc3RTZWN0aW9uXG4gICk7XG5cbiAgLy9GdW5jdGlvbiB0byByZW5kZXIgYSBuZXcgY2FyZFxuICBmdW5jdGlvbiByZW5kZXJDYXJkKGl0ZW0pIHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgICAgZGF0YTogaXRlbSxcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKGl0ZW0pID0+IHsgcG9wdXBJbWFnZS5vcGVuKGl0ZW0pIH0sXG4gICAgICBoYW5kbGVMaWtlQ2FyZDogKGl0ZW0pID0+IHtcblxuICAgICAgICBpZiAoaXRlbS5fY2FyZExpa2VkKSB7XG4gICAgICAgICAgYXBpLmRlbGV0ZUxpa2UoaXRlbS5fY2FyZElkKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICBpdGVtLnVwZGF0ZUNvdW50KHJlcywgdmFsdWVzWzBdLl9pZCk7XG5cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBhcGkuYWRkTGlrZShpdGVtLl9jYXJkSWQpXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgIGl0ZW0udXBkYXRlQ291bnQocmVzLCB2YWx1ZXNbMF0uX2lkKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaGFuZGxlUmVtb3ZlQ2FyZDogKGl0ZW0pID0+IHsgc2V0Q2FyZElkKGl0ZW0uaWQpLCBjb25maXJtRGVsZXRlUG9wdXAub3BlbigpIH0sXG4gICAgICBjYXJkU2VsZWN0b3I6IFwiLmNhcmQtdGVtcGxhdGVcIlxuICAgIH0sXG4gICAgKTtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKHZhbHVlc1swXS5faWQpO1xuICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50LCBjYXJkLl9jYXJkSWQpXG4gIH07XG5cbiAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKHZhbHVlc1sxXSk7XG5cbiAgLy9TZXQgaW5pdGlhbCB1c2VyIGRhdGEgYW5kIGF2YXRhciBpbWFnZVxuICBjb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKHtcbiAgICBuYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fbmFtZScsXG4gICAgdGl0bGVTZWxlY3RvcjogJy5wcm9maWxlX190aXRsZScsXG4gICAgYXZhdGFyU2VsZWN0b3I6ICcucHJvZmlsZV9faW1hZ2UnXG4gIH0pXG4gIHVzZXIuc2V0VXNlckluZm8odmFsdWVzWzBdKVxuXG4gIC8vQUREIE5FVyBQTEFDRSBQT1BVUFxuICBjb25zdCBhZGRQbGFjZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgIHBvcHVwU2VsZWN0b3I6IFwiLnBvcHVwX3R5cGVfYWRkXCIsXG4gICAgZm9ybUJ1dHRvbjogXCJDcmVhdGVcIixcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgbmV3UGxhY2UgPSB7IG5hbWU6IGRhdGEubmFtZSwgbGluazogZGF0YS5saW5rIH1cbiAgICAgIGFwaS5hZGRDYXJkKG5ld1BsYWNlKVxuICAgICAgICAudGhlbigobmV3Q2FyZCkgPT4ge1xuICAgICAgICAgIHJlbmRlckNhcmQobmV3Q2FyZCksXG4gICAgICAgICAgICBhZGRQbGFjZVBvcHVwLmNsb3NlKClcbiAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7IGFkZFBsYWNlUG9wdXAuc3RvcExvYWRpbmcoKSB9KVxuICAgIH1cbiAgfVxuICApXG5cbiAgYWRkUGxhY2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBzZXREZWZhdWx0QnV0dG9uU3RhdGUoYWRkUGxhY2VQb3B1cCksXG4gICAgICBhZGRQbGFjZVBvcHVwLm9wZW4oKVxuICB9KVxuXG4gIC8vRURJVCBQUk9GSUxFIFBPUFVQXG4gIGNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgICB7XG4gICAgICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cF90eXBlX2VkaXRcIixcbiAgICAgIGZvcm1CdXR0b246IFwiU2F2ZVwiLFxuICAgICAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGRhdGEubmFtZTtcbiAgICAgICAgY29uc3QgYWJvdXQgPSBkYXRhLmFib3V0O1xuICAgICAgICBhcGkuc2V0VXNlcihuYW1lLCBhYm91dClcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgICAgICBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICAgICAgICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKVxuICAgICAgICAgIC5maW5hbGx5KCgpID0+IHsgZWRpdFByb2ZpbGVQb3B1cC5zdG9wTG9hZGluZygpIH0pXG4gICAgICB9XG4gICAgfSlcbiAgZnVuY3Rpb24gc2V0RGVmYXVsdFZhbHVlcyhuYW1lLCBhYm91dCkge1xuICAgIGVkaXRQcm9maWxlUG9wdXAuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfbmFtZVwiKS52YWx1ZSA9IG5hbWVcbiAgICBlZGl0UHJvZmlsZVBvcHVwLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dF90eXBlX3RpdGxlXCIpLnZhbHVlID0gYWJvdXRcbiAgfTtcblxuICBlZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBzZXREZWZhdWx0VmFsdWVzKHByb2ZpbGVOYW1lLnRleHRDb250ZW50LCBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQpO1xuICAgIGVkaXRQcm9maWxlUG9wdXAub3BlbigpXG4gIH0pXG5cbiAgLy9DT05GSVJNIERFTEVURSBQT1BVUFxuICBjb25zdCBjb25maXJtRGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgICB7XG4gICAgICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cF90eXBlX2RlbGV0ZVwiLFxuICAgICAgZm9ybUJ1dHRvbjogXCJZZXNcIixcbiAgICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGRhdGEuaWQpXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgY2FyZHNMaXN0LnJlbW92ZUl0ZW0oZGF0YS5pZCk7XG4gICAgICAgICAgICBjb25maXJtRGVsZXRlUG9wdXAuY2xvc2UoKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpXG4gICAgICAgICAgLmZpbmFsbHkoKCkgPT4geyBjb25maXJtRGVsZXRlUG9wdXAuc3RvcExvYWRpbmcoKSB9KVxuICAgICAgfVxuICAgIH0pXG4gIGNvbmZpcm1EZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuICBmdW5jdGlvbiBzZXRDYXJkSWQoaWQpIHtcbiAgICBjb25maXJtRGVsZXRlUG9wdXAuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfY2FyZC1pZFwiKS52YWx1ZSA9IGlkXG4gIH1cbn0pXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKVxuXG4vL0VESVQgQVZBVEFSIFBPUFVQXG5jb25zdCBlZGl0QXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiLnBvcHVwX3R5cGVfYXZhdGFyXCIsXG4gIGZvcm1CdXR0b246IFwiU2F2ZVwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGF2YXRhclVybCA9IGRhdGEuYXZhdGFyTGluaztcbiAgICBhcGkuc2V0QXZhdGFyKGF2YXRhclVybClcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGF2YXRhckltYWdlLnNyYyA9IGF2YXRhclVybCxcbiAgICAgICAgICBlZGl0QXZhdGFyUG9wdXAuY2xvc2UoKVxuICAgICAgfVxuICAgICAgKVxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpXG4gICAgICAuZmluYWxseSgoKSA9PiB7IGVkaXRBdmF0YXJQb3B1cC5zdG9wTG9hZGluZygpIH0pXG4gIH1cblxufSlcbmVkaXRBdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKSxcbiAgICBzZXREZWZhdWx0QnV0dG9uU3RhdGUoZWRpdEF2YXRhclBvcHVwKVxufSlcblxuLy9QUkVWSUVXIElNQUdFIFBPUFVQXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfdHlwZV9wcmV2aWV3Jyk7XG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuLy9Gb3JtIFZhbGlkYXRpb25cbmNvbnN0IGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJmb3JtX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG4vL0NyZWF0ZSBpbnN0YW5jZXMgb2YgRm9ybVZhbGlkYXRvclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uU2V0dGluZ3MsIGFkZEZvcm0pO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVZhbGlkYXRpb25TZXR0aW5ncywgZWRpdEZvcm0pO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVZhbGlkYXRpb25TZXR0aW5ncywgYXZhdGFyRm9ybSk7XG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuIiwiXG4vL0FwaVxuY29uc3QgY29uZmlnID0ge1xuICAgIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMS9cIixcbiAgICBoZWFkZXJzOiB7XG4gICAgICBhdXRob3JpemF0aW9uOiBcImNlMGNmYWQ5LWMwMjItNDRjNC04NjczLTg5N2Y0ZWFmOWVlZFwiLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG4gIH1cblxuICBleHBvcnQge2NvbmZpZ30iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfZ2V0SW52YWxpZElucHV0IiwiX2J1dHRvbiIsImRpc2FibGVkIiwiX2lucHV0TGlzdCIsInNvbWUiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJDYXJkIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VDYXJkIiwiaGFuZGxlUmVtb3ZlQ2FyZCIsImNhcmRTZWxlY3RvciIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkSWQiLCJfaWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkT3duZXIiLCJvd25lciIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDYXJkIiwiX2hhbmRsZVJlbW92ZUNhcmQiLCJfY2FyZExpa2VkIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJ1c2VySWQiLCJsZW5ndGgiLCJsaWtlIiwicmVzIiwiX3JlbmRlckxpa2VzIiwiX2dldFRlbXBsYXRlIiwic3JjIiwiYWx0IiwiaGlkZGVuIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiX2l0ZW1zIiwiZWxlbWVudCIsInByZXBlbmQiLCJpdGVtIiwic3BsaWNlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtQnV0dG9uIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm1CdXR0b24iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2UiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsInRpdGxlU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl90aXRsZUVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsImFib3V0IiwiYXZhdGFyIiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2hhbmRsZVJlc3BvbnNlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZWRpdE1vZGFsIiwiYWRkTW9kYWwiLCJhdmF0YXJNb2RhbCIsImVkaXRGb3JtIiwiYWRkRm9ybSIsImF2YXRhckZvcm0iLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwiYXZhdGFyQnV0dG9uIiwiYXZhdGFySW1hZ2UiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVUaXRsZSIsInNldERlZmF1bHRCdXR0b25TdGF0ZSIsInBvcHVwIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldFVzZXIiLCJnZXRJbml0aWFsQ2FyZHMiLCJ2YWx1ZXMiLCJzb3J0IiwiYSIsImIiLCJEYXRlIiwiY3JlYXRlZEF0IiwiY2FyZHNMaXN0IiwicmVuZGVyQ2FyZCIsImNhcmQiLCJwb3B1cEltYWdlIiwib3BlbiIsImRlbGV0ZUxpa2UiLCJ1cGRhdGVDb3VudCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImFkZExpa2UiLCJjb25maXJtRGVsZXRlUG9wdXAiLCJjYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsInNldFVzZXJJbmZvIiwiYWRkUGxhY2VQb3B1cCIsIm5ld1BsYWNlIiwiYWRkQ2FyZCIsIm5ld0NhcmQiLCJmaW5hbGx5Iiwic3RvcExvYWRpbmciLCJzZXRFdmVudExpc3RlbmVycyIsImVkaXRQcm9maWxlUG9wdXAiLCJzZXRVc2VyIiwiZGVsZXRlQ2FyZCIsInJlbW92ZUl0ZW0iLCJlZGl0QXZhdGFyUG9wdXAiLCJhdmF0YXJVcmwiLCJhdmF0YXJMaW5rIiwic2V0QXZhdGFyIiwiZm9ybVZhbGlkYXRpb25TZXR0aW5ncyIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9